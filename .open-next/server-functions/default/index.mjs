globalThis.monorepoPackagePath = "";import process from 'node:process';import { Buffer } from 'node:buffer';import { createRequire as topLevelCreateRequire } from 'module';const require = topLevelCreateRequire(import.meta.url);import bannerUrl from 'url';const __dirname = bannerUrl.fileURLToPath(new URL('.', import.meta.url));globalThis.openNextDebug = false;globalThis.openNextVersion = "3.9.12";
var It=Object.create;var le=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var Dt=Object.getOwnPropertyNames;var $t=Object.getPrototypeOf,Ut=Object.prototype.hasOwnProperty;var H=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var _=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ft=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),k=(e,t)=>{for(var r in t)le(e,r,{get:t[r],enumerable:!0})},qt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Dt(t))!Ut.call(e,a)&&a!==r&&le(e,a,{get:()=>t[a],enumerable:!(o=jt(t,a))||o.enumerable});return e};var Bt=(e,t,r)=>(r=e!=null?It($t(e)):{},qt(t||!e||!e.__esModule?le(r,"default",{value:e,enumerable:!0}):r,e));function W(e){try{return"__openNextInternal"in e}catch{return!1}}var j,Y,Z=_(()=>{j=class extends Error{__openNextInternal=!0;canIgnore=!0;logLevel=0;constructor(t){super(t),this.name="IgnorableError"}},Y=class extends Error{__openNextInternal=!0;canIgnore=!1;logLevel=2;constructor(t){super(t),this.name="FatalError"}}});function u(...e){globalThis.openNextDebug&&console.log(...e)}function de(...e){console.warn(...e)}function E(...e){if(e.some(t=>zt(t)))return u(...e);if(e.some(t=>W(t))){let t=e.find(r=>W(r));return t.logLevel<Xt()?void 0:t.logLevel===0?console.log(...e.map(r=>W(r)?`${r.name}: ${r.message}`:r)):t.logLevel===1?de(...e.map(r=>W(r)?`${r.name}: ${r.message}`:r)):console.error(...e)}console.error(...e)}function Xt(){switch((process.env.OPEN_NEXT_ERROR_LOG_LEVEL??"1").toLowerCase()){case"debug":case"0":return 0;case"error":case"2":return 2;default:return 1}}var Wt,zt,y=_(()=>{Z();Wt=[{clientName:"S3Client",commandName:"GetObjectCommand",errorName:"NoSuchKey"}],zt=e=>Wt.some(t=>t.clientName===e?.clientName&&t.commandName===e?.commandName&&(t.errorName===e?.error?.name||t.errorName===e?.error?.Code))});function te(e){return e?typeof e=="string"?e.split(/(?<!Expires=\w+),/i).map(t=>t.trim()):e:[]}function ue(e){let t={};for(let[r,o]of e)r in t?Array.isArray(t[r])?t[r].push(o):t[r]=[t[r],o]:t[r]=o;return t}var ee,Qt,z=_(()=>{y();ee=e=>{let t={};if(!e)return t;for(let[r,o]of Object.entries(e)){if(o===void 0)continue;let a=r.toLowerCase();if(a==="location"&&Array.isArray(o)){o.length===1||o[0]===o[1]?t[a]=o[0]:(de("Multiple different values for Location header found. Using the last one"),t[a]=o[o.length-1]);continue}t[a]=Qt(o)}return t},Qt=e=>typeof e=="string"?e:Array.isArray(e)?e.join(","):String(e)});import{ReadableStream as qe}from"node:stream/web";function D(){return process.env.OPEN_NEXT_FORCE_NON_EMPTY_RESPONSE==="true"?new qe({pull(e){Be??=Buffer.from("SOMETHING"),e.enqueue(Be),e.close()}},{highWaterMark:0}):new qe({start(e){e.close()}})}var Be,$=_(()=>{});function ye(e){return ue(e.entries())}var Re=_(()=>{z()});var it=Ft(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.parseCookie=nt;S.parse=nt;S.stringifyCookie=Or;S.stringifySetCookie=ce;S.serialize=ce;S.parseSetCookie=Ir;S.stringifySetCookie=ce;S.serialize=ce;var ot=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,at=/^[\u0021-\u003A\u003C-\u007E]*$/,kr=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Ar=/^[\u0020-\u003A\u003D-\u007E]*$/,Lr=/^-?\d+$/,Hr=Object.prototype.toString,Mr=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function nt(e,t){let r=new Mr,o=e.length;if(o<2)return r;let a=t?.decode||st,n=0;do{let s=Ce(e,n,o);if(s===-1)break;let i=ve(e,n,o);if(s>i){n=e.lastIndexOf(";",s-1)+1;continue}let l=L(e,n,s);r[l]===void 0&&(r[l]=a(L(e,s+1,i))),n=i+1}while(n<o);return r}function Or(e,t){let r=t?.encode||encodeURIComponent,o=[];for(let a of Object.keys(e)){let n=e[a];if(n===void 0)continue;if(!ot.test(a))throw new TypeError(`cookie name is invalid: ${a}`);let s=r(n);if(!at.test(s))throw new TypeError(`cookie val is invalid: ${n}`);o.push(`${a}=${s}`)}return o.join("; ")}function ce(e,t,r){let o=typeof e=="object"?e:{...r,name:e,value:String(t)},n=(typeof t=="object"?t:r)?.encode||encodeURIComponent;if(!ot.test(o.name))throw new TypeError(`argument name is invalid: ${o.name}`);let s=o.value?n(o.value):"";if(!at.test(s))throw new TypeError(`argument val is invalid: ${o.value}`);let i=o.name+"="+s;if(o.maxAge!==void 0){if(!Number.isInteger(o.maxAge))throw new TypeError(`option maxAge is invalid: ${o.maxAge}`);i+="; Max-Age="+o.maxAge}if(o.domain){if(!kr.test(o.domain))throw new TypeError(`option domain is invalid: ${o.domain}`);i+="; Domain="+o.domain}if(o.path){if(!Ar.test(o.path))throw new TypeError(`option path is invalid: ${o.path}`);i+="; Path="+o.path}if(o.expires){if(!jr(o.expires)||!Number.isFinite(o.expires.valueOf()))throw new TypeError(`option expires is invalid: ${o.expires}`);i+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(i+="; HttpOnly"),o.secure&&(i+="; Secure"),o.partitioned&&(i+="; Partitioned"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${o.priority}`)}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${o.sameSite}`)}return i}function Ir(e,t){let r=t?.decode||st,o=e.length,a=ve(e,0,o),n=Ce(e,0,a),s=n===-1?{name:"",value:r(L(e,0,a))}:{name:L(e,0,n),value:r(L(e,n+1,a))},i=a+1;for(;i<o;){let l=ve(e,i,o),f=Ce(e,i,l),d=f===-1?L(e,i,l):L(e,i,f),c=f===-1?void 0:L(e,f+1,l);switch(d.toLowerCase()){case"httponly":s.httpOnly=!0;break;case"secure":s.secure=!0;break;case"partitioned":s.partitioned=!0;break;case"domain":s.domain=c;break;case"path":s.path=c;break;case"max-age":c&&Lr.test(c)&&(s.maxAge=Number(c));break;case"expires":if(!c)break;let p=new Date(c);Number.isFinite(p.valueOf())&&(s.expires=p);break;case"priority":if(!c)break;let h=c.toLowerCase();(h==="low"||h==="medium"||h==="high")&&(s.priority=h);break;case"samesite":if(!c)break;let m=c.toLowerCase();(m==="lax"||m==="strict"||m==="none")&&(s.sameSite=m);break}i=l+1}return s}function ve(e,t,r){let o=e.indexOf(";",t);return o===-1?r:o}function Ce(e,t,r){let o=e.indexOf("=",t);return o<r?o:-1}function L(e,t,r){let o=t,a=r;do{let n=e.charCodeAt(o);if(n!==32&&n!==9)break}while(++o<a);for(;a>o;){let n=e.charCodeAt(a-1);if(n!==32&&n!==9)break;a--}return e.slice(o,a)}function st(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function jr(e){return Hr.call(e)==="[object Date]"}});var lt={};k(lt,{default:()=>Fr});import{Buffer as Dr}from"node:buffer";var ct,$r,Ur,Fr,dt=_(()=>{ct=Bt(it(),1);z();Re();$r=new Set([101,103,204,205,304]),Ur={convertFrom:async e=>{let t=new URL(e.url),r=t.searchParams,o=ye(r),a={};e.headers.forEach((c,p)=>{a[p]=c});let n=t.pathname,s=e.method,l=s!=="GET"&&s!=="HEAD"?Dr.from(await e.arrayBuffer()):void 0,f=e.headers.get("cookie"),d=f?ct.default.parse(f):{};return{type:"core",method:s,rawPath:n,url:e.url,body:l,headers:a,remoteAddress:e.headers.get("x-forwarded-for")??"::1",query:o,cookies:d}},convertTo:async e=>{if("internalEvent"in e){let o=new Request(e.internalEvent.url,{body:e.internalEvent.body,method:e.internalEvent.method,headers:{...e.internalEvent.headers,"x-forwarded-host":e.internalEvent.headers.host}});if(globalThis.__dangerous_ON_edge_converter_returns_request===!0)return o;let a=(e.isISR||e.internalEvent.rawPath.startsWith("/_next/image"))&&process.env.DISABLE_CACHE!=="true"?{cacheEverything:!0}:{};return fetch(o,{cf:a})}let t=new Headers;for(let[o,a]of Object.entries(e.headers)){if(o==="set-cookie"&&typeof a=="string"){let n=te(a);for(let s of n)t.append(o,s);continue}if(Array.isArray(a))for(let n of a)t.append(o,n);else t.set(o,a)}let r=$r.has(e.statusCode)?null:e.body;return new Response(r,{status:e.statusCode,headers:t})},name:"edge"},Fr=Ur});var pt={};k(pt,{default:()=>Wr});import{Writable as ut}from"node:stream";var qr,Br,Wr,ft=_(()=>{qr=new Set([101,204,205,304]),Br=async(e,t)=>async(r,o,a,n)=>{globalThis.process=process;for(let[c,p]of Object.entries(o))typeof p=="string"&&(process.env[c]=p);let s=await t.convertFrom(r),i=new URL(r.url),{promise:l,resolve:f}=Promise.withResolvers(),d={writeHeaders(c){let{statusCode:p,cookies:h,headers:m}=c,T=new Headers(m);for(let w of h)T.append("Set-Cookie",w);if(i.hostname==="localhost"&&T.set("Content-Encoding","identity"),qr.has(p)){let w=new Response(null,{status:p,headers:T});return f(w),new ut({write(q,V,R){R()}})}let b,I=new ReadableStream({start(w){b=w}}),N=new Response(I,{status:p,headers:T});return f(N),new ut({write(w,q,V){try{b.enqueue(w)}catch(R){return V(R)}V()},final(w){b.close(),w()},destroy(w,q){if(w)b.error(w);else try{b.close()}catch{}q(w)}})},abortSignal:n,retainChunks:!1};return a.waitUntil(e(s,{streamCreator:d,waitUntil:a.waitUntil.bind(a)})),l},Wr={wrapper:Br,name:"cloudflare-node",supportStreaming:!0}});var ht={};k(ht,{default:()=>Xr});var zr,Xr,mt=_(()=>{zr={name:"dummy",mode:"original",getByPath:async()=>[],getByTag:async()=>[],getLastModified:async(e,t)=>t??Date.now(),writeTags:async()=>{}},Xr=zr});var gt={};k(gt,{default:()=>Gr});var Qr,Gr,xt=_(()=>{Z();Qr={name:"dummy",send:async()=>{throw new Y("Dummy queue is not implemented")}},Gr=Qr});var wt={};k(wt,{default:()=>Vr});var Jr,Vr,yt=_(()=>{Z();Jr={name:"dummy",get:async()=>{throw new j('"Dummy" cache does not cache anything')},set:async()=>{throw new j('"Dummy" cache does not cache anything')},delete:async()=>{throw new j('"Dummy" cache does not cache anything')}},Vr=Jr});var Rt={};k(Rt,{default:()=>Yr});var Kr,Yr,Et=_(()=>{Kr={name:"dummy"},Yr=Kr});var _t={};k(_t,{default:()=>eo});var Zr,eo,bt=_(()=>{$();Zr={name:"fetch-proxy",proxy:async e=>{let{url:t,headers:r,method:o,body:a}=e,n=Object.fromEntries(Object.entries(r).filter(([l])=>l.toLowerCase()!=="cf-connecting-ip")),s=await fetch(t,{method:o,headers:n,body:a}),i={};return s.headers.forEach((l,f)=>{i[f]=l}),{type:"core",headers:i,statusCode:s.status,isBase64Encoded:!0,body:s.body??D()}}},eo=Zr});var vt={};k(vt,{default:()=>to});var to,Ct=_(()=>{to={name:"dummy",invalidatePaths:e=>Promise.resolve()}});y();function Se(){let e=process.env;e.NODE_ENV=process.env.NODE_ENV??"production"}function Ne(){return Math.random().toString(36).slice(2,8)}import{AsyncLocalStorage as Pr}from"node:async_hooks";y();z();import{Transform as Gt}from"node:stream";var M="set-cookie",O="This cannot be used in OpenNext",re=class extends Gt{fixHeadersFn;onEnd;streamCreator;initialHeaders;statusCode;statusMessage="";headers={};headersSent=!1;_chunks=[];headersAlreadyFixed=!1;_cookies=[];responseStream;bodyLength=0;strictContentLength=!1;assignSocket(t){throw new Error(O)}detachSocket(t){throw new Error(O)}writeContinue(t){throw new Error(O)}writeEarlyHints(t,r){throw new Error(O)}writeProcessing(){throw new Error(O)}req;chunkedEncoding=!1;shouldKeepAlive=!0;useChunkedEncodingByDefault=!0;sendDate=!1;connection=null;socket=null;setTimeout(t,r){throw new Error(O)}addTrailers(t){throw new Error(O)}constructor(t,r,o,a,n){super(),this.fixHeadersFn=t,this.onEnd=r,this.streamCreator=o,this.initialHeaders=a,n&&Number.isInteger(n)&&n>=100&&n<=599&&(this.statusCode=n),o?.abortSignal?.addEventListener("abort",()=>{this.destroy()})}get originalResponse(){return this}get finished(){return this.responseStream?this.responseStream?.writableFinished:this.writableFinished}setHeader(t,r){let o=t.toLowerCase();return o===M&&(Array.isArray(r)?this._cookies=r:this._cookies=[r]),this.headers[o]=r,this}removeHeader(t){let r=t.toLowerCase();return r===M?this._cookies=[]:delete this.headers[r],this}hasHeader(t){let r=t.toLowerCase();return r===M?this._cookies.length>0:this.headers[r]!==void 0}getHeaders(){return this.headers}getHeader(t){return this.headers[t.toLowerCase()]}getHeaderNames(){return Object.keys(this.headers)}flushHeaders(){this.headersSent=!0;let t=globalThis.__openNextAls?.getStore()?.mergeHeadersPriority??"middleware";if(this.initialHeaders){this.headers=t==="middleware"?{...this.headers,...this.initialHeaders}:{...this.initialHeaders,...this.headers};let o=te(this.initialHeaders[M]?.toString());this._cookies=t==="middleware"?[...this._cookies,...o]:[...o,...this._cookies]}this.fixHeaders(this.headers),this.fixHeadersForError(),this.headers[M]=this._cookies;let r=ee(this.headers);delete r[M],this.streamCreator&&(this.responseStream=this.streamCreator?.writeHeaders({statusCode:this.statusCode??200,cookies:this._cookies,headers:r}),this.pipe(this.responseStream))}appendHeader(t,r){let o=t.toLowerCase();if(!this.hasHeader(o))return this.setHeader(o,r);let a=this.getHeader(o),n=Array.isArray(r)?r:[r],s=Array.isArray(a)?[...a,...n]:[a,...n];return this.setHeader(o,s)}writeHead(t,r,o){let a=o,n;typeof r=="string"?n=r:a=r;let s=this.headers;if(a)if(Array.isArray(a))for(let i=0;i<a.length;i+=2)s[a[i]]=a[i+1];else for(let i of Object.keys(a))s[i]=a[i];return this.statusCode=t,o&&(this.headers=s),this.flushHeaders(),this}fixHeaders(t){this.headersAlreadyFixed||(this.fixHeadersFn(t),this.headersAlreadyFixed=!0)}getFixedHeaders(){return this.fixHeaders(this.headers),this.fixHeadersForError(),this.headers[M]=this._cookies,this.headers}getBody(){return Buffer.concat(this._chunks)}_internalWrite(t,r){let o=r==="buffer"?t:Buffer.from(t,r);this.bodyLength+=o.length,this.streamCreator?.retainChunks!==!1&&this._chunks.push(o),this.push(o),this.streamCreator?.onWrite?.()}_transform(t,r,o){this.headersSent||this.flushHeaders(),this._internalWrite(t,r),o()}_flush(t){this.headersSent||this.flushHeaders(),globalThis.__openNextAls?.getStore()?.pendingPromiseRunner.add(this.onEnd(this.headers)),this.streamCreator?.onFinish?.(this.bodyLength),this.bodyLength===0&&process.env.OPEN_NEXT_FORCE_NON_EMPTY_RESPONSE==="true"&&(u('Force writing "SOMETHING" to the response body'),this.push("SOMETHING")),t()}setHeaders(t){return t.forEach((r,o)=>{this.setHeader(o,Array.isArray(r)?r:r.toString())}),this}get sent(){return this.finished||this.headersSent}getHeaderValues(t){let r=this.getHeader(t);if(r!==void 0)return(Array.isArray(r)?r:[r]).map(o=>o.toString())}send(){for(let t of this._chunks)this.write(t);this.end()}body(t){return this.write(t),this}onClose(t){this.on("close",t)}redirect(t,r){return this.setHeader("Location",t),this.statusCode=r,r===308&&this.setHeader("Refresh",`0;url=${t}`),this}fixHeadersForError(){process.env.OPEN_NEXT_DANGEROUSLY_SET_ERROR_HEADERS!=="true"&&(this.statusCode===404||this.statusCode===500)&&(this.headers["cache-control"]="private, no-cache, no-store, max-age=0, must-revalidate")}};import Jt from"node:http";var X=class extends Jt.IncomingMessage{constructor({method:t,url:r,headers:o,body:a,remoteAddress:n}){super({encrypted:!0,readable:!1,remoteAddress:n,address:()=>({port:443}),end:Function.prototype,destroy:Function.prototype}),a&&(o["content-length"]??=String(Buffer.byteLength(a))),Object.assign(this,{ip:n,complete:!0,httpVersion:"1.1",httpVersionMajor:"1",httpVersionMinor:"1",method:t,headers:o,body:a,url:r}),this._read=()=>{this.push(a),this.push(null)}}};y();var oe=class{resolve;reject;promise;constructor(){let t,r;this.promise=new Promise((o,a)=>{t=o,r=a}),this.resolve=t,this.reject=r}},pe=class{promises=[];withResolvers(){let t=new oe;return this.promises.push(t),t}add(t){let r=new oe;this.promises.push(r),t.then(r.resolve,r.reject)}async await(){u(`Awaiting ${this.promises.length} detached promises`),(await Promise.allSettled(this.promises.map(o=>o.promise))).filter(o=>o.status==="rejected").forEach(o=>{E(o.reason)})}};async function Vt(){let e=globalThis.__openNextAls.getStore(),t=e?.pendingPromiseRunner.await()??Promise.resolve();if(e?.waitUntil){e.waitUntil(t);return}await t}function Kt(){let e=Symbol.for("@next/request-context"),t=Symbol.for("@vercel/request-context"),r=globalThis.__openNextAls.getStore(),o=r?.waitUntil??(n=>r?.pendingPromiseRunner.add(n)),a={get:()=>({waitUntil:o})};globalThis[e]=a,process.env.EMULATE_VERCEL_REQUEST_CONTEXT&&(globalThis[t]=a)}function Pe({isISRRevalidation:e,waitUntil:t,requestId:r=Math.random().toString(36)},o){return globalThis.__openNextAls.run({requestId:r,pendingPromiseRunner:new pe,isISRRevalidation:e,waitUntil:t,writtenTags:new Set},async()=>{Kt();let a;try{a=await o()}finally{await Vt()}return a})}y();import je from"node:path";import v from"node:fs";import A from"node:path";function Te(e){let t=A.join(e,"required-server-files.json"),r=v.readFileSync(t,"utf-8"),{config:o}=JSON.parse(r);return o}function ke(e){let t=A.join(e,"BUILD_ID");return v.readFileSync(t,"utf-8").trim()}function fe(e){let t=A.join(e,"server/pages-manifest.json"),r=v.readFileSync(t,"utf-8");return JSON.parse(r)}function Ae(e){return Object.entries(fe(e)).filter(([t,r])=>r.endsWith(".html")).map(([t])=>t)}function Le(e){let t=A.join(e,"routes-manifest.json"),r=v.readFileSync(t,"utf-8"),o=JSON.parse(r),a=o.dataRoutes??[],n={static:a.filter(s=>s.routeKeys===void 0),dynamic:a.filter(s=>s.routeKeys!==void 0)};return{basePath:o.basePath,rewrites:Array.isArray(o.rewrites)?{beforeFiles:[],afterFiles:o.rewrites,fallback:[]}:{beforeFiles:o.rewrites.beforeFiles??[],afterFiles:o.rewrites.afterFiles??[],fallback:o.rewrites.fallback??[]},redirects:o.redirects??[],routes:{static:o.staticRoutes??[],dynamic:o.dynamicRoutes??[],data:n},locales:o.i18n?.locales??[]}}function He(e){let t=A.join(e,"prerender-manifest.json");if(!v.existsSync(t))return;let r=v.readFileSync(t,"utf-8");return JSON.parse(r)}function Me(e){let t=A.join(e,"app-path-routes-manifest.json");return v.existsSync(t)?JSON.parse(v.readFileSync(t,"utf-8")):{}}function Oe(e){let t=A.join(e,"server/middleware-manifest.json"),r=v.readFileSync(t,"utf-8");return JSON.parse(r)}function Ie(e){let t=A.join(e,"server/functions-config-manifest.json");try{let r=v.readFileSync(t,"utf-8");return JSON.parse(r)}catch{return{functions:{},version:1}}}var C=je.join(__dirname,".next"),Yt=je.join(__dirname,".open-next");u({NEXT_DIR:C,OPEN_NEXT_DIR:Yt});var g=Te(C),ae=ke(C),De=Ae(C),P=Le(C);var ne=He(C),$e=fe(C);var Ue=Oe(C);var he=Me(C),Fe=Ie(C);process.env.NEXT_BUILD_ID=ae;process.env.NEXT_PREVIEW_MODE_ID=ne?.preview?.previewModeId;y();var Zt=H("node:module"),Lo=Zt._resolveFilename;import ir from"node:crypto";z();y();import{ReadableStream as cr}from"node:stream/web";var er=new Set(["application/octet-stream","application/epub+zip","application/msword","application/pdf","application/rtf","application/vnd.amazon.ebook","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","font/otf","font/woff","font/woff2","image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/vnd.microsoft.icon","image/webp","audio/3gpp","audio/aac","audio/basic","audio/flac","audio/mpeg","audio/ogg","audio/wavaudio/webm","audio/x-aiff","audio/x-midi","audio/x-wav","video/3gpp","video/mp2t","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-msvideo","application/java-archive","application/vnd.apple.installer+xml","application/x-7z-compressed","application/x-apple-diskimage","application/x-bzip","application/x-bzip2","application/x-gzip","application/x-java-archive","application/x-rar-compressed","application/x-tar","application/x-zip","application/zip","application/x-protobuf"]);function me(e){if(!e)return!1;let t=e.split(";")[0];return er.has(t)}$();y();function tr(e,t,r){let o=new Map,a=e.replace(/[ \t]/g,"");if(t){let d=0;for(let c of t){let p=c.toLowerCase();if(o.set(p,{orig:c,pos:d++}),r.prefixMatch){let h=p.split("-");for(;h.pop(),h.length>0;){let m=h.join("-");o.has(m)||o.set(m,{orig:c,pos:d++})}}}}let n=a.split(","),s=[],i=new Set;for(let d=0;d<n.length;++d){let c=n[d];if(!c)continue;let p=c.split(";");if(p.length>2)throw new Error(`Invalid ${r.type} header`);let h=p[0].toLowerCase();if(!h)throw new Error(`Invalid ${r.type} header`);let m={token:h,pos:d,q:1};if(t&&o.has(h)&&(m.pref=o.get(h).pos),i.add(m.token),p.length===2){let T=p[1],[b,I]=T.split("=");if(!I||b!=="q"&&b!=="Q")throw new Error(`Invalid ${r.type} header`);let N=Number.parseFloat(I);if(N===0)continue;Number.isFinite(N)&&N<=1&&N>=.001&&(m.q=N)}s.push(m)}s.sort((d,c)=>c.q!==d.q?c.q-d.q:c.pref!==d.pref?d.pref===void 0?1:c.pref===void 0?-1:d.pref-c.pref:d.pos-c.pos);let l=s.map(d=>d.token);if(!t||!t.length)return l;let f=[];for(let d of l)if(d==="*")for(let[c,p]of o)i.has(c)||f.push(p.orig);else{let c=d.toLowerCase();o.has(c)&&f.push(o.get(c).orig)}return f}function We(e="",t){return tr(e,t,{type:"accept-language",prefixMatch:!0})[0]||void 0}function rr(e){return g.i18n?.locales.includes(e.split("/")[1].toLowerCase())??!1}function or(e){let t=g.i18n,r=e.NEXT_LOCALE?.toLowerCase();return r?t?.locales.find(o=>r===o.toLowerCase()):void 0}function ar({hostname:e,detectedLocale:t}){let o=g.i18n?.domains;if(!o)return;let a=t?.toLowerCase();for(let n of o){let s=n.domain.split(":",1)[0].toLowerCase();if(e===s||a===n.defaultLocale.toLowerCase()||n.locales?.some(i=>a===i.toLowerCase()))return n}}function ze(e,t){let r=ar({hostname:e.headers.host});if(t.localeDetection===!1)return r?.defaultLocale??t.defaultLocale;let o=or(e.cookies),a=We(e.headers["accept-language"],t?.locales);return u({cookiesLocale:o,preferredLocale:a,defaultLocale:t.defaultLocale,domainLocale:r}),r?.defaultLocale??o??a??t.defaultLocale}function Q(e){let t=g.i18n;return!t||rr(e.rawPath)?e.rawPath:`/${ze(e,t)}${e.rawPath}`}function nr(e,t,r){let o=sr(e),a=o+=1831565813;a=Math.imul(a^a>>>15,a|1),a^=a+Math.imul(a^a>>>7,a|61);let n=((a^a>>>14)>>>0)/4294967296,s=Math.floor(n*t);return`${r}-${s}`}function ge(e){let t=Number.parseInt(process.env.MAX_REVALIDATE_CONCURRENCY??"10");return nr(e,t,"revalidate")}function sr(e){let t=1779033703,r=3144134277,o=1013904242,a=2773480762;for(let n=0,s;n<e.length;n++)s=e.charCodeAt(n),t=r^Math.imul(t^s,597399067),r=o^Math.imul(r^s,2869860233),o=a^Math.imul(o^s,951274213),a=t^Math.imul(a^s,2716044179);return t=Math.imul(o^t>>>18,597399067),r=Math.imul(a^r>>>22,2869860233),o=Math.imul(t^o>>>17,951274213),a=Math.imul(r^a>>>19,2716044179),t^=r^o^a,r^=t,o^=t,a^=t,t>>>0}function G(e,t){let r=g.basePath??"";return new URL(`${r}${t}`,e).href}function Xe(e){let t=e.statusCode||200,r=ee(e.getFixedHeaders()),o=me(r["content-type"])||!!r["content-encoding"],a=new cr({pull(n){if(!e._chunks||e._chunks.length===0){n.close();return}n.enqueue(e._chunks.shift())}});return{type:"core",statusCode:t,headers:r,body:a,isBase64Encoded:o}}function xe(e){let t=[];return Object.entries(e).forEach(([r,o])=>{Array.isArray(o)?o.forEach(a=>t.push(`${r}=${a}`)):t.push(`${r}=${o}`)}),t.length>0?`?${t.join("&")}`:""}function Qe(e){if(!e)return{};let t=new URLSearchParams(e),r={};for(let o of t.keys()){let a=t.getAll(o);r[o]=a.length>1?a:a[0]}return r}function Ge(e,t){if(t?.functions?.["/_middleware"])return t.functions["/_middleware"].matchers?.map(({regexp:o})=>new RegExp(o))??[/.*/];let r=e.middleware["/"];return r?.matchers?r.matchers.map(({regexp:o})=>new RegExp(o)):[]}var x;(function(e){e.CACHE_CONTROL="cache-control",e.NEXT_CACHE="x-nextjs-cache"})(x||(x={}));function lr(e,t){if(e.rawPath==="/404"||e.rawPath==="/500"){if(process.env.OPEN_NEXT_DANGEROUSLY_SET_ERROR_HEADERS==="true")return;t[x.CACHE_CONTROL]="private, no-cache, no-store, max-age=0, must-revalidate";return}let r=Q(e);De.includes(r)&&!e.headers["x-middleware-prefetch"]&&(t[x.CACHE_CONTROL]="public, max-age=0, s-maxage=31536000, must-revalidate")}function dr(e){let t=e[x.CACHE_CONTROL];t&&(Array.isArray(t)&&(t=t.join(",")),typeof t=="string"&&(e[x.CACHE_CONTROL]=t.replace(/\bstale-while-revalidate(?!=)/,"stale-while-revalidate=2592000")))}function ur(e){g.poweredByHeader&&(e["X-OpenNext"]="1"),globalThis.openNextDebug&&(e["X-OpenNext-Version"]=globalThis.openNextVersion),(process.env.OPEN_NEXT_REQUEST_ID_HEADER||globalThis.openNextDebug)&&(e["X-OpenNext-RequestId"]=globalThis.__openNextAls.getStore()?.requestId)}async function pr(e,t,r,o){if(r[x.NEXT_CACHE]==="STALE"){let a=o?.[Symbol.for("NextInternalRequestMeta")],n=a?._nextDidRewrite?t.startsWith("/_next/data/")?`/_next/data/${ae}${a?._nextRewroteUrl}.json`:a?._nextRewroteUrl:t;try{let s=f=>ir.createHash("md5").update(f).digest("hex"),i=globalThis.__openNextAls.getStore()?.lastModified??0,l=`${r.etag??r.ETag??""}`;await globalThis.queue.send({MessageBody:{host:e,url:n,eTag:l,lastModified:i},MessageDeduplicationId:s(`${t}-${i}-${l}`),MessageGroupId:ge(t)})}catch(s){E(`Failed to revalidate stale page ${t}`,s)}}}function fr(e){let t=/s-maxage=(\d+)/,r=e[x.CACHE_CONTROL]?.match(t),o=r?Number.parseInt(r[1]):void 0;if(!o)return;if(e[x.NEXT_CACHE]==="REVALIDATED"){e[x.CACHE_CONTROL]="private, no-cache, no-store, max-age=0, must-revalidate";return}let a=globalThis.__openNextAls.getStore()?.lastModified??0;if(e[x.NEXT_CACHE]==="HIT"&&a>0&&(u("cache-control",e[x.CACHE_CONTROL],a,Date.now()),o&&o!==31536e3)){let n=Math.round((Date.now()-a)/1e3),s=Math.max(o-n,1);e[x.CACHE_CONTROL]=`s-maxage=${s}, stale-while-revalidate=2592000`}e[x.NEXT_CACHE]==="STALE"&&(e[x.CACHE_CONTROL]="s-maxage=2, stale-while-revalidate=2592000")}function we(e,t,r){let o=e.internalEvent;return new re(a=>{lr(o,a),dr(a),ur(a),fr(a)},async a=>{await pr(o.headers.host,o.rawPath,a),await hr(e,a)},r,t,e.rewriteStatusCode)}async function hr(e,t){let{internalEvent:r,resolvedRoutes:o,initialURL:a}=e,n=new URL(a).pathname;!(r.headers["x-isr"]==="1")&&t[x.NEXT_CACHE]==="REVALIDATED"&&await globalThis.cdnInvalidationHandler.invalidatePaths([{initialPath:n,rawPath:r.rawPath,resolvedRoutes:o}])}y();$();y();y();var fa=60*60*24*365,ha=60*60*24*30;$();y();var gr=`^/(?:${P.locales.map(e=>`${e}/?`).join("|")})?`,xr=P.basePath?`^${P.basePath}/?`:"^/",wr=gr.replace("^/",xr);function Je(e){let t=e.map(a=>({page:a.page,regexp:new RegExp(a.regex.replace("^/",wr))})),r=new Set,o=new Set;for(let[a,n]of Object.entries(he))a.endsWith("page")?r.add(n):a.endsWith("route")&&o.add(n);return function(n){return t.filter(i=>i.regexp.test(n)).map(i=>{let l="page";return r.has(i.page)?l="app":o.has(i.page)&&(l="route"),{route:i.page,type:l}})}}var Ve=Je([...P.routes.static,...yr()]),Ke=Je(P.routes.dynamic);function yr(){let e=a=>({page:a,regex:`^${a}(?:/)?$`}),t=new Set(P.routes.dynamic.map(({page:a})=>a)),r=Object.keys($e).filter(a=>a.startsWith("/api/")&&!t.has(a)).map(e),o=Object.values(he).filter(a=>(a.startsWith("/api/")||a==="/api")&&!t.has(a)).map(e);return[...r,...o]}$();Re();var _r=Ue,br=Fe,Fa=Ge(_r,br);var Ee="x-middleware-response-",Ye=Ee.length,J="x-opennext-",_e=`${J}initial-url`,nn=`${J}locale`,be=`${J}resolved-routes`,Ze=`${J}rewrite-status-code`,et=`${J}request-id`;y();import Cr from"next/dist/server/next-server.js";y();var vr=H("node:module"),ln=vr._resolveFilename;var Sr=H.resolve("./cache.cjs"),Nr=H.resolve("./composable-cache.cjs"),F=new Cr.default({conf:{...g,compress:!1,cacheHandler:Sr,cacheMaxMemorySize:0,experimental:{...g.experimental,trustHostHeader:!0,cacheHandlers:{default:Nr}}},customServer:!1,dev:!1,dir:__dirname}),U=!1;globalThis.__next_route_preloader=async e=>{if(U)return;let r=(globalThis.fnName?globalThis.openNextConfig.functions[globalThis.fnName]:globalThis.openNextConfig.default)?.routePreloadingBehavior??"none";if(r==="none"){U=!0;return}if(!("unstable_preloadEntries"in F)){u("The current version of Next.js does not support route preloading. Skipping route preloading."),U=!0;return}if(e==="waitUntil"&&r==="withWaitUntil"){let o=globalThis.__openNextAls.getStore()?.waitUntil;if(!o){E("You've tried to use the 'withWaitUntil' route preloading behavior, but the 'waitUntil' function is not available."),U=!0;return}u("Preloading entries with waitUntil"),o?.(F.unstable_preloadEntries()),U=!0}else if(e==="start"&&r==="onStart"||e==="warmerEvent"&&r==="onWarmerEvent"||e==="onDemand"){let o=Date.now();u("Preloading entries"),await F.unstable_preloadEntries(),u("Preloading entries took",Date.now()-o,"ms"),U=!0}};var se=e=>"getRequestHandlerWithMetadata"in F?F.getRequestHandlerWithMetadata(e):F.getRequestHandler();globalThis.__openNextAls=new Pr;async function tt(e,t){let r=e.headers,o=globalThis.openNextConfig.middleware?.external?e.headers[et]:Math.random().toString(36);return Pe({isISRRevalidation:r["x-isr"]==="1",waitUntil:t?.waitUntil,requestId:o},async()=>{await globalThis.__next_route_preloader("waitUntil"),r["x-forwarded-host"]&&(r.host=r["x-forwarded-host"]),u("internalEvent",e);let a={initialPath:r[_e]??e.rawPath,resolvedRoutes:r[be]?JSON.parse(r[be]):[],rewriteStatusCode:Number.parseInt(r[Ze])},n={internalEvent:e,isExternalRewrite:!1,origin:!1,isISR:!1,initialURL:e.url,...a},s="type"in n?n.headers:n.internalEvent.headers,i={};for(let[R,K]of Object.entries(s)){if(!R.startsWith(Ee))continue;let B=R.slice(Ye);B!=="x-middleware-set-cookie"&&(i[B]=K),s[B]=K,delete s[R]}if("isExternalRewrite"in n&&n.isExternalRewrite===!0)try{n=await globalThis.proxyExternalRequest.proxy(n.internalEvent)}catch(R){E("External request failed.",R),n={internalEvent:{type:"core",rawPath:"/500",method:"GET",headers:{},url:G(e.url,"/500"),query:{},cookies:{},remoteAddress:""},isExternalRewrite:!1,isISR:!1,origin:!1,initialURL:e.url,resolvedRoutes:[{route:"/500",type:"page"}]}}if("type"in n){if(t?.streamCreator){let R=we({internalEvent:e,isExternalRewrite:!1,isISR:!1,resolvedRoutes:[],origin:!1,initialURL:e.url},n.headers,t.streamCreator);R.statusCode=n.statusCode,R.flushHeaders();let[K,B]=n.body.tee();for await(let Ot of K)R.write(Ot);R.end(),n.body=B}return n}let l=n.internalEvent;u("preprocessedEvent",l);let{search:f,pathname:d,hash:c}=new URL(l.url),p={method:l.method,url:`${d}${f}${c}`,headers:{...s},body:l.body,remoteAddress:l.remoteAddress},h=globalThis.openNextConfig.dangerous?.headersAndCookiesPriority?globalThis.openNextConfig.dangerous.headersAndCookiesPriority(l):"middleware",m=globalThis.__openNextAls.getStore();m&&(m.mergeHeadersPriority=h);let T=new X(p),b=we(n,i,t?.streamCreator);await Tr(T,b,n);let{statusCode:I,headers:N,isBase64Encoded:w,body:q}=Xe(b);return{type:e.type,statusCode:I,headers:N,body:q,isBase64Encoded:w}})}async function Tr(e,t,r){delete e.body;let o=new URL(r.internalEvent.headers[_e]??r.initialURL),a;r.internalEvent.rawPath==="/500"?a=500:r.internalEvent.rawPath==="/404"&&(a=404);let n={isNextDataReq:r.internalEvent.query.__nextDataReq==="1",initURL:r.initialURL,initQuery:Qe(o.search),initProtocol:o.protocol,defaultLocale:g.i18n?.defaultLocale,locale:r.locale,middlewareInvoke:!1,invokePath:r.internalEvent.rawPath,invokeQuery:r.internalEvent.query,invokeStatus:a};try{e.url=o.pathname+xe(r.internalEvent.query),await se(n)(e,t)}catch(s){s.constructor.name==="NoFallbackError"?await rt(e,t,r,n):(E("NextJS request failed.",s),await ie("500",t,r.internalEvent))}}async function rt(e,t,r,o,a=1){if(a>=5){await ie("500",t,r.internalEvent);return}if(a>=r.resolvedRoutes.length){await ie("404",t,r.internalEvent);return}try{await se({...r,invokeOutput:r.resolvedRoutes[a].route,...o})(e,t)}catch(n){n.constructor.name==="NoFallbackError"?await rt(e,t,r,o,a+1):(E("NextJS request failed.",n),await ie("500",t,r.internalEvent))}}async function ie(e,t,r){try{let o=new X({method:"GET",url:`/${e}`,headers:r.headers,body:r.body,remoteAddress:r.remoteAddress});await se({invokePath:e==="404"?"/404":"/500",invokeStatus:e==="404"?404:500,middlewareInvoke:!1})(o,t)}catch(o){E("NextJS request failed.",o),t.statusCode=500,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify({message:"Server failed to respond.",details:o},null,2))}}async function St(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(dt(),lt))).default}async function Nt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(ft(),pt))).default}async function Pt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(mt(),ht))).default}async function Tt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(xt(),gt))).default}async function kt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(yt(),wt))).default}async function At(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(Et(),Rt))).default}async function Lt(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(bt(),_t))).default}async function Ht(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(Ct(),vt))).default}async function Mt(){let e=await import("./open-next.config.mjs").then(n=>n.default),t=globalThis.fnName?e.functions[globalThis.fnName]:e.default;globalThis.serverId=Ne(),globalThis.openNextConfig=e,await globalThis.__next_route_preloader("start"),globalThis.queue=await Tt(t.override?.queue),globalThis.incrementalCache=await kt(t.override?.incrementalCache),globalThis.tagCache=await Pt(t.override?.tagCache),e.middleware?.external!==!0&&(globalThis.assetResolver=await At(globalThis.openNextConfig.middleware?.assetResolver)),globalThis.proxyExternalRequest=await Lt(t.override?.proxyExternalRequest),globalThis.cdnInvalidationHandler=await Ht(t.override?.cdnInvalidation);let r=await St(t.override?.converter),{wrapper:o,name:a}=await Nt(t.override?.wrapper);return u("Using wrapper",a),o(tt,r)}Se();ro();globalThis.internalFetch=fetch;var Vn=await Mt();function ro(){process.chdir(__dirname)}export{Vn as handler};
